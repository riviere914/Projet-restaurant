var UUID;UUID=function(e){"use strict";function t(){}function r(e){return 0>e?NaN:30>=e?0|Math.random()*(1<<e):53>=e?(0|1073741824*Math.random())+1073741824*(0|Math.random()*(1<<e-30)):NaN}function n(e,t){for(var r=e.toString(16),n=t-r.length,i="0";0<n;n>>>=1,i+=i)1&n&&(r=i+r);return r}return t.generate=function(){return n(r(32),8)+"-"+n(r(16),4)+"-"+n(16384|r(12),4)+"-"+n(32768|r(14),4)+"-"+n(r(48),12)},t.overwrittenUUID=e,t}(UUID);var adways=adways||{},htmlAddEventListener=function(e,t,r,n){if(arguments.length<4&&(n=!1),"load"===t&&void 0===e.onload){var i=function(t){"loaded"!==e.readyState&&"complete"!==e.readyState||(r.call(),e.removeEventListener?e.removeEventListener("readystatechange",i):e.detachEvent?e.detachEvent("onreadystatechange",i):e.onreadystatechange=null)};e.addEventListener?e.addEventListener("readystatechange",i):e.attachEvent?e.attachEvent("onreadystatechange",i):e.onreadystatechange=i}else e.addEventListener?e.addEventListener(t,r,n):e.attachEvent&&e.attachEvent("on"+t,r,n)};adways.AnalyticsTracker=function(e){this.baseProperties=null,this.baseUrl=null,e.creative_format&&e.creative_id?(void 0===e&&(e={}),void 0===e.force_protocol&&void 0!==adways.tweaks&&void 0!==adways.tweaks.forceProtocol&&(e.force_protocol=adways.tweaks.forceProtocol),void 0===e.record_interface&&(e.record_interface="generic"),e.client_start_timestamp=(new Date).getTime(),e.client_session_id=arguments.length>1?arguments[1]:UUID.generate(),this.baseUrl="https://www.adwstats.com/",void 0!==e.force_protocol&&-1===this.baseUrl.search(/^http[s]?\:\/\//)&&(this.baseUrl=e.force_protocol+":"+this.baseUrl),this.skipCookie=0,void 0!==e.nc&&(this.skipCookie=e.nc),this.x_domain="",void 0!==e.x_domain&&(this.x_domain=e.x_domain),this.sendTrackerInit=!0,void 0!==e.send_tracker_init&&(this.sendTrackerInit=e.send_tracker_init),this.macros=new Object,void 0!==e.macros&&(this.macros=e.macros),this.baseProperties=e,this.sendTrackerInit&&this.sendData({event_type:"init",event_name:"tracker"})):console.error("Property 'creative_format' and 'creative_id' must be defined!")},adways.AnalyticsTracker.prototype.evaluateData=function(e){var t={};for(var r in e)if(e.hasOwnProperty(r)&&"cbFunction"!==r){var n=e[r];"function"==typeof n&&(n=n()),null===n||"number"==typeof n&&!isFinite(n)||(t[r]=n)}return t},adways.AnalyticsTracker.prototype._getQueryString=function(e){var t=this.evaluateData(e),r=[];for(var n in t)r.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return r.join("&")},adways.AnalyticsTracker.prototype.isReady=function(){return null!=this.baseProperties},adways.AnalyticsTracker.prototype.initAnalyticsTrackerData=function(e,t,r,n){var i=new Object;for(var a in this.baseProperties)i[a]=this.baseProperties[a];if(void 0!==n&&null!=n)for(var a in n)i[a]=n[a];if("object"==typeof e)for(var a in e)i[a]=e[a];else i.event_type=e,i.event_name=t,void 0!==r&&(i.event_data=r);var s=new Date;return i.client_date_utc=s.toISOString().substr(0,19).replace("T"," "),i.client_date_utc_offset=s.toTimeString().substr(12,3)+":"+s.toTimeString().substr(15,2),i.client_cache_buster=UUID.generate(),i.client_screen_width=window.screen.width,i.client_screen_height=window.screen.height,i.client_window_width=window.innerWidth,i.client_window_height=window.innerHeight,i.client_charset=document.charset,i.client_time_elapsed=s.getTime()-this.baseProperties.client_start_timestamp,i},adways.AnalyticsTracker.prototype.sendData=function(e,t,r,n){if(this.isReady()){var i=this.initAnalyticsTrackerData(e,t,r,n),a=arguments.length>4?arguments[4]:null;"object"==typeof arguments[0]&&"function"==typeof arguments[0].cbFunction&&(a=e.cbFunction),this.callPixel(i,a)}},adways.AnalyticsTracker.prototype.callPixel=function(e){if(this.isReady()){e.x_domain=this.x_domain;var t=this.baseUrl+e.record_interface+".pixel?"+this._getQueryString(e);1===this.skipCookie&&(t=this.baseUrl+e.record_interface+".pixel?nc=1&"+this._getQueryString(e));var r=arguments.length>1?arguments[1]:null,n=new Image;return null!==r&&(htmlAddEventListener(n,"load",r),htmlAddEventListener(n,"error",r)),n.style.display="none",n.src=t,n}return null},adways.AnalyticsTracker.prototype.redirect=function(e,t,r,n,i,a){if(!this.isReady())return null;if(function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE");return t>0?parseInt(e.substring(t+5,e.indexOf(".",t))):navigator.userAgent.match(/Trident\/7\./)?11:0}()>0&&"_parent"==a){var s=document.createElement("a");return s.href=this.getRedirectURL(i,e,t,r,n),document.body.appendChild(s),s.click()}return window.open(this.getRedirectURL(i,e,t,r,n),a)},adways.AnalyticsTracker.prototype.getRedirectURL=function(e,t,r,n,i){if(this.isReady()){var a=e,s={};a.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,t,r){s[t]=r});if(0===Object.keys(s).length){a.replace(/[/;]+([^=;]+)=([^;]*)/gi,function(e,t,r){s[t]=r})}if(Object.keys(s).length>0)for(var o in s)void 0!==typeof this.macros[o]&&void 0!==this.macros[o]&&"undefined"!==this.macros[o]&&(e=e.replace(s[o],this.macros[o]));var c=this.initAnalyticsTrackerData(t,r,n,i);c.redirect_location=e,c.x_domain=this.x_domain;var d=this.baseUrl+c.record_interface+".redirect?"+this._getQueryString(c);return 1===this.skipCookie&&(d=this.baseUrl+c.record_interface+".redirect?nc=1&"+this._getQueryString(c)),d}return null},adways.AnalyticsTracker.prototype.setTagHref=function(e,t,r,n,i,a){return!!this.isReady()&&(e.href=this.getRedirectURL(t,r,n,i,a),!0)},adways.analytics=adways.analytics||{},adways.analytics.Tracker=adways.AnalyticsTracker;
