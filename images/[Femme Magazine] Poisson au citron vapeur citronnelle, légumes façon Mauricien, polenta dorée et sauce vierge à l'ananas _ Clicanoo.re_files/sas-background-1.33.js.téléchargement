var sasBackground={d:document,w:window,c:window.SmartBackgroundConfig,timer:0,closed:!1,rtbClickLogic:!1,resizeCreative:!1,addElement:function(t,e,i){var c=this.d.createElement(t);for(var a in i)c.setAttribute(a,i[a]);return e.appendChild(c),c},hasFlash:function(){try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return!0}catch(t){if(void 0!==navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return!0}return!1},sasOpen:function(t){"_blank"===this.c.creative.clickTarget?this.w.open(t):this.d.location=t},_addEvent:function(t,e,i){t&&e&&i&&(t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i))},addClickMap:function(){if(this.c.clickMap.pageWidth){var t=this.addElement("div",this.relDiv,{id:"sas-clickMap1_"+this.c.insertionId}),e=this.addElement("a",t,{id:"sas-clickMap11_"+this.c.insertionId,class:"sas-clickMapLeftRight_"+this.c.insertionId,href:this.c.creative.oryginalClickUrl&&this.c.creative.clickUrlArray.length>1?this.c.creative.clickUrlArray[1]:this.c.creative.clickUrl,target:this.c.creative.clickTarget});"fixed"===this.c.background.attachment&&(e.style.position="fixed"),this.rtbClickLogic&&(e.onclick=function(){sasBackground.tracking(sasBackground.c.creative.clickCountPixelUrl)});var i=this.addElement("div",this.relDiv,{id:"sas-clickMap2_"+this.c.insertionId}),c=this.addElement("a",i,{id:"sas-clickMap22_"+this.c.insertionId,class:"sas-clickMapLeftRight_"+this.c.insertionId,href:this.c.creative.oryginalClickUrl&&this.c.creative.clickUrlArray.length>2?this.c.creative.clickUrlArray[2]:this.c.creative.clickUrl,target:this.c.creative.clickTarget});if("fixed"===this.c.background.attachment&&(c.style.position="fixed"),this.rtbClickLogic&&(c.onclick=function(){sasBackground.tracking(sasBackground.c.creative.clickCountPixelUrl)}),this.c.clickMap.topPartHeight){var a=this.addElement("a",this.relDiv,{id:"sas-clickMap3_"+this.c.insertionId,href:this.c.creative.oryginalClickUrl&&this.c.creative.clickUrlArray.length>0?this.c.creative.clickUrlArray[0]:this.c.creative.clickUrl,target:this.c.creative.clickTarget});this.rtbClickLogic&&(a.onclick=function(){sasBackground.tracking(sasBackground.c.creative.clickCountPixelUrl)})}}else sasBackground.c.other.fakeBodyIdTag?(this.fakeBodyIdTagObject=this.d.getElementById(this.c.other.fakeBodyIdTag),this.fakeBodyIdTagObject.onclick=function(t){t&&((t.target?t.target:t.srcElement).id===sasBackground.c.other.fakeBodyIdTag&&(sasBackground.sasOpen(""+sasBackground.c.creative.clickUrl),sasBackground.rtbClickLogic&&sasBackground.tracking(sasBackground.c.creative.clickCountPixelUrl)))}):this.d.onclick=function(t){if(!1===sasBackground.closed){if(!t)return;var e=t.target?t.target:t.srcElement;if(navigator.userAgent.match(/iPad/i)&&3===e.nodeType&&(e=e.parentNode),(!e||"BODY"!==e.tagName)&&"BODY"!==e.parentNode.tagName)return;4!==sasBackground.c.creative.type&&(sasBackground.sasOpen(""+sasBackground.c.creative.clickUrl),sasBackground.rtbClickLogic&&sasBackground.tracking(sasBackground.c.creative.clickCountPixelUrl))}}},appendToContainer:function(t,e){var i=this.d.getElementById(t);if(i){if("string"==typeof e){var c=this.d.createElement("div");c.innerHTML=e,e=c}i.appendChild(e)}},addCss:function(){var t=this.c.other.important?"!important":"",e=-Math.floor(this.c.creative.width/2)+this.c.other.horizontalOffset,i=this.c.other.verticalOffset?this.c.other.verticalOffset+"px":0,c=this.c.elementOffset.contentVerticalOffset?"padding-top:"+this.c.elementOffset.contentVerticalOffset+"px "+t+";":"",a=this.c.clickMap.verticalOffset?this.c.clickMap.verticalOffset+"px":0;this.d.body.style.overflowX="hidden";var s=this.d.createElement("style");s.type="text/css";var n=["#sas-relDiv_"+this.c.insertionId+"{position:relative;width:1px;margin:0 auto;overflow:visible;}","#sas-relDiv_"+this.c.insertionId+" #sas-backgroundDiv_"+this.c.insertionId+" img{max-width:none}","#sas-backgroundDiv_"+this.c.insertionId+"{width:"+this.c.creative.width+"px;height:"+this.c.creative.height+"px;position:absolute;z-index:"+this.c.other.zIndex+";top:"+i+";left:"+e+"px}","#sas-backgroundDivBackup_"+this.c.insertionId+"{width:"+this.c.creative.backup.width+"px;height:"+this.c.creative.backup.height+"px;position:absolute;z-index:"+this.c.other.zIndex+";top:"+i+";left:"+e+"px}","#sas_closeButton_"+this.c.insertionId+"{position:"+("fixed"===this.c.background.attachment?"fixed":"absolute")+";top:30px;right:30px;cursor:pointer;font;font-family: Arial,sans-serif; font-size:"+this.c.close.linkFontSize+"px;z-index:"+(this.c.clickMap.zIndex+this.c.other.zIndex+9999)+";color:#"+this.c.close.linkColor+"}",".sas_defaultCloseButton_"+this.c.insertionId+"{margin-left:10px;z-index:"+(this.c.clickMap.zIndex+this.c.other.zIndex+9999)+";width:50px;height:50px;-webkit-tap-highlight-color: rgba(0,0,0,0);-webkit-user-select:none;cursor:pointer;}",".sas-clickMapLeftRight_"+this.c.insertionId+"{width:"+this.c.clickMap.width+"px;height:"+this.c.clickMap.height+"px;z-index:"+this.c.clickMap.zIndex+";display:block;outline:0;border:"+(this.c.clickMap.testBorderLine?"1px dashed black":"none")+";}","#sas-clickMap1_"+this.c.insertionId+"{position:absolute;top:"+a+";left:-"+(Math.floor(this.c.clickMap.pageWidth/2)+this.c.clickMap.width-this.c.clickMap.horizontalOffset)+"px;z-index:"+this.c.clickMap.zIndex+";}","#sas-clickMap2_"+this.c.insertionId+"{position:absolute;top:"+a+";left:"+(Math.floor(this.c.clickMap.pageWidth/2)+this.c.clickMap.horizontalOffset)+"px;z-index:"+this.c.clickMap.zIndex+";}","#sas-clickMap3_"+this.c.insertionId+"{width:"+this.c.clickMap.pageWidth+"px;height:"+this.c.clickMap.topPartHeight+"px;position:absolute;top:"+a+";left:-"+(Math.floor(this.c.clickMap.pageWidth/2)-this.c.clickMap.horizontalOffset)+"px;display:block;z-index:"+this.c.clickMap.zIndex+";outline:0;border:"+(this.c.clickMap.testBorderLine?"1px dashed black":"none")+";}","#sas-backgroundColorDiv_"+this.c.insertionId+"{position:absolute;top:0;left:0;width:100%;height:100%;z-index:"+(this.c.other.zIndex-1)+";}"].join("\r\n");1===this.c.creative.type||!this.hasFlash()&&2===this.c.creative.type?(this.hasFlash()||2!==this.c.creative.type||(this.c.creative.url=this.c.creative.backup.url),n+="\r\n"+(this.c.other.fakeBodyIdTag?"#"+this.c.other.fakeBodyIdTag:"body")+"{background: #"+this.c.background.color+' url("'+this.c.creative.url+'") '+this.c.background.repeat+" "+this.c.background.position+" "+this.c.background.attachment+" "+t+";cursor:"+(this.c.other.forcePointerCursor?"pointer":"default")+" "+t+";"+c+"}",n+="\r\n"+(this.c.other.fakeBodyIdTag?"#"+this.c.other.fakeBodyIdTag:"body")+" > *{cursor: auto "+t+";}",this.resizeCreative?n+="\r\n"+(this.c.other.fakeBodyIdTag?"#"+this.c.other.fakeBodyIdTag:"body")+"{background-size:"+this.c.creative.width+"px "+t+"}":this.d.body.style.backgroundSize="auto"):(n+="\r\n"+(this.c.other.fakeBodyIdTag&&(2===this.c.creative.type&&this.hasFlash()||0===this.c.creative.type||4===this.c.creative.type)?"#sas-backgroundColorDiv_"+this.c.insertionId:"body")+"{background-color: #"+this.c.background.color+";cursor:"+(this.c.other.forcePointerCursor?"pointer":"default")+";"+c+"}","fixed"===this.c.background.attachment&&(n+="\r\n#sas-backgroundDiv2_"+this.c.insertionId+"{position:fixed}")),""!==this.c.elementOffset.elementId&&(n+="\r\n"+("id"===this.c.elementOffset.elementType?"#":".")+this.c.elementOffset.elementId+"{margin-top:"+this.c.elementOffset.value+"px "+t+"}"),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(this.d.createTextNode(n));var r="sas-relDiv_"+this.c.insertionId;window.isAsync&&this.c.tagId?this.appendToContainer(r,s):this.d.getElementsByTagName("head")[0].appendChild(s)},close:function(){if(this.closed=!0,clearTimeout(this.timer),this.relDiv&&this.relDiv.parentNode.removeChild(this.relDiv),this.closeButton&&this.closeButton.parentNode.removeChild(this.closeButton),this.c.other.fakeBodyIdTag&&this.d.getElementById(this.c.other.fakeBodyIdTag)?2===this.c.creative.type&&this.hasFlash()||0===this.c.creative.type||4===this.c.creative.type?this.backgroundColorDiv&&this.backgroundColorDiv.parentNode.removeChild(this.backgroundColorDiv):(this.d.getElementById(this.c.other.fakeBodyIdTag).style.backgroundImage="none",this.d.getElementById(this.c.other.fakeBodyIdTag).style.backgroundColor="transparent"):(this.d.body.style.backgroundImage="none",this.d.body.style.backgroundColor="transparent"),this.c.other.forcePointerCursor&&(this.d.body.style.cursor="default"),""!==this.c.elementOffset.elementId)if("id"===this.c.elementOffset.elementType&&this.d.getElementById(this.c.elementOffset.elementId))this.d.getElementById(this.c.elementOffset.elementId).style.marginTop=0;else for(var t=this.d.getElementsByClassName(this.c.elementOffset.elementId),e=0;e<t.length;e++)t[e].style.marginTop="0";this.c.elementOffset.contentVerticalOffset&&(this.c.other.fakeBodyIdTag&&this.d.getElementById(this.c.other.fakeBodyIdTag)?this.d.getElementById(this.c.other.fakeBodyIdTag).style.paddingTop=0:this.d.body.style.paddingTop=0)},addCreative:function(){var t,e,i=this.addElement("div",this.relDiv,{id:"sas-backgroundDiv_"+this.c.insertionId}),c=this.addElement("div",i,{id:"sas-backgroundDiv2_"+this.c.insertionId});if(0===this.c.creative.type){var a=this.addElement("iframe",c,{src:"about:blank",width:this.c.creative.width,height:this.c.creative.height,frameBorder:"0",scrolling:"no",marginheight:"0",marginwidth:"0"}),s=a.contentWindow||a,n=a.contentDocument||a.contentWindow.document;n.open("text/html","replace"),n.sasClickFunc=(t=s,e=n,function(){sasBackground.c.creative.oryginalClickUrl||(function(i,c){i=i||"docReady";var a=[],s=!1,n=!1;function r(){if(!s){s=!0;for(var e=0;e<a.length;e++)a[e].fn.call(t,a[e].ctx);a=[]}}function o(){"complete"===e.readyState&&r()}(c=c||t)[i]=function(i,c){s?setTimeout(function(){i(c)},1):(a.push({fn:i,ctx:c}),"complete"===e.readyState||!e.attachEvent&&"interactive"===e.readyState?setTimeout(r,1):n||(e.addEventListener?(e.addEventListener("DOMContentLoaded",r,!1),t.addEventListener("load",r,!1)):(e.attachEvent("onreadystatechange",o),t.attachEvent("onload",r)),n=!0))}}("docReady2",t),t.docReady2(function(){!function t(i){try{var c=e.body.getElementsByTagName("A"),a=[];(a=Object.keys(c).map(function(t){if("abgl"!==c[t].id)return c[t]})).sort(function(t,e){return e.offsetWidth-t.offsetWidth}),a[0]&&a[0].href?(sasBackground.c.creative.id?(sasBackground.rtbClickLogic=!1,sasBackground.c.creative.clickUrl=sasBackground.c.creative.clickUrl+encodeURIComponent(a[0].href)):(sasBackground.rtbClickLogic=!0,sasBackground.c.creative.clickUrl=a[0].href),sasBackground.c.creative.clickTarget=a[0].target,sasBackground.addClickMap()):i<6&&setTimeout(function(){t(++i)},500)}catch(t){}}(1)}))}),n.write('<!DOCTYPE html><head><script type="text/javascript">var inDapIF=false;<\/script></head><body style="padding:0;margin:0"><script type="text/javascript">document.sasClickFunc();<\/script>'+this.c.creative.agencyCode+"</body></html>");var r=sas.utils.getIEVersion();(!r||r>9)&&n.close()}else if(2===this.c.creative.type)c.innerHTML=this.flash({movie:this.c.creative.url,wmode:this.c.creative.wMode,allowscriptaccess:"always",allowfullscreen:"true",flashvars:this.c.creative.flashVars},"",this.c.creative.width,this.c.creative.height);else if(4===this.c.creative.type){for(var o="",d=0;d<this.c.creative.clickUrlArray.length;d++)o+=0===d?"&clicktag="+encodeURIComponent(this.c.creative.clickUrlArray[d]):"&clicktag"+(d+1)+"="+encodeURIComponent(this.c.creative.clickUrlArray[d]);var h=this.c.creative.url+(this.c.creative.url.indexOf("?")<0?"?":"&")+"sasfid="+this.c.tagId+o;this.addElement("iframe",c,{src:h,width:this.c.creative.width,height:this.c.creative.height,frameBorder:"0",scrolling:"no",marginheight:"0",marginwidth:"0"});var l=this;this._addEvent(this.w,"message",function(t){if(t.data&&l.c.creative&&l.c.tagId===t.data){var e={clickUrls:l.c.creative.clickUrlArray,isSmart:!0};t.source.postMessage(JSON.stringify(e),"*")}})}},flash:function(t,e,i,c){var a="";for(var s in t)a+='<param name="'+s+'" value="'+t[s]+'" />';return'<object type="application/x-shockwave-flash" name="'+e+'" id="'+e+'" width="'+i+'" height="'+c+'" data="'+t.movie+'">'+a+"</object>"},addCloseButton:function(){this.closeButton=this.addElement("div",this.d.body,{id:"sas_closeButton_"+this.c.insertionId}),""!==this.c.close.linkText&&(this.closeButton.innerHTML=this.c.close.linkText),this.c.close.defaultButton&&this.addElement("img",this.closeButton,{class:"sas_defaultCloseButton_"+this.c.insertionId,src:this.c.filePath+"/images/close-retina.png"}),this.closeButton.onclick=function(){sasBackground.close()}},addFixes:function(){!function(){if(!sasBackground.d.getElementsByClassName){var t=[].indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1},e=function(e,i){return sasBackground.d.querySelectorAll?i.querySelectorAll("."+e):function(){for(var c=i.getElementsByTagName("*"),a=[],s=0;s<c.length;s++)c[s].className&&(" "+c[s].className+" ").indexOf(" "+e+" ")>-1&&-1===t.call(a,c[s])&&a.push(c[s]);return a}()};sasBackground.d.getElementsByClassName=function(t){return e(t,sasBackground.d)},Element.prototype.getElementsByClassName=function(t){return e(t,this)}}}(),function(t,e){"use strict";t=t||"docReady";var i=[],c=!1,a=!1;function s(){if(!c){c=!0;for(var t=0;t<i.length;t++)i[t].fn.call(sasBackground.w,i[t].ctx);i=[]}}function n(){"complete"===sasBackground.d.readyState&&s()}(e=e||sasBackground.w)[t]=function(t,e){c?setTimeout(function(){t(e)},1):(i.push({fn:t,ctx:e}),"complete"===sasBackground.d.readyState||!sasBackground.d.attachEvent&&"interactive"===sasBackground.d.readyState?setTimeout(s,1):a||(sasBackground.d.addEventListener?(sasBackground.d.addEventListener("DOMContentLoaded",s,!1),sasBackground.w.addEventListener("load",s,!1)):(sasBackground.d.attachEvent("onreadystatechange",n),sasBackground.w.attachEvent("onload",s)),a=!0))}}("docReady",sasBackground)},tracking:function(t){(new Image).src=t},cleanFix:function(){window.sas_addCleanListener(this.c.tagId,function(){try{sasBackground.relDiv&&sasBackground.relDiv.parentNode.removeChild(sasBackground.relDiv)}catch(t){}})},customCreativeSize:function(){if(1===this.c.creative.type){var t=this.d.getElementById("sasCustomScript_"+this.c.insertionId),e=document.getElementById("sasCustomScript_"+this.c.insertionId),i=t||e,c=null;if(window.isAsync&&i)c=(i.contentWindow||i).sasBackgroundSizes;else c=window.sasBackgroundSizes;if(c&&"object"==typeof c&&c.length)try{for(var a=0;a<c.length;a++)if(this.w.location.hostname.indexOf(c[a].domain)>=0){this.resizeCreative=!0,this.c.creative.width=Math.round(1.64*c[a].width),this.c.clickMap.pageWidth&&this.c.clickMap.width&&this.c.clickMap.height&&(this.c.clickMap.pageWidth=c[a].width);break}}catch(t){console.log("Error: Bad data type ("+t+")")}}},afterReadyFunc:function(){if(this.customCreativeSize(),this.relDiv=this.d.createElement("div"),this.relDiv.setAttribute("id","sas-relDiv_"+this.c.insertionId),this.c.other.fakeBodyIdTag&&this.d.getElementById(this.c.other.fakeBodyIdTag)){var t=this.d.getElementById(this.c.other.fakeBodyIdTag);t.style.position="relative",t.insertBefore(this.relDiv,t.firstChild),(2===this.c.creative.type&&this.hasFlash()||0===this.c.creative.type||4===this.c.creative.type)&&(this.backgroundColorDiv=this.addElement("div",t,{id:"sas-backgroundColorDiv_"+this.c.insertionId}))}else this.d.body.insertBefore(this.relDiv,this.d.body.firstChild);this.addCss(),window.isAsync&&void 0!==window.sas_addCleanListener&&this.cleanFix(),(2===this.c.creative.type&&this.hasFlash()||0===this.c.creative.type||4===this.c.creative.type)&&this.addCreative(),this.c.creative.oryginalClickUrl&&this.addClickMap()},init:function(){"undefined"!=typeof inDapIF&&window.inDapIF&&(this.d=window.parent.document,this.w=window.parent),this.addFixes(),this.c.other.trackingUrl&&this.tracking(this.c.other.trackingUrl),sasBackground.docReady(function(){sasBackground.afterReadyFunc()}),(this.c.close.label||this.c.close.defaultButton)&&this.addCloseButton(),this.c.other.duration&&(this.timer=setTimeout(function(){sasBackground.close()},1e3*this.c.other.duration))}};sasBackground.init();